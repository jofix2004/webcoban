<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop Page</title>
  <style>
    @font-face {
      font-family: "FzPoppins";
      src: url("FzPoppins/FzPoppins/FZ\ Poppins-Regular.ttf") format("truetype");
      font-weight: 400; /* Regular */
      font-style: normal;
  }
  
  @font-face {
      font-family: "Vollkorn";
      src: url("Vollkorn/static/Vollkorn-Medium.ttf") format("truetype");
      font-weight: 500; /* Medium */
      font-style: normal;
  }
  
  @font-face {
      font-family: "Vollkorn";
      src: url("Vollkorn/static/Vollkorn-Regular.ttf") format("truetype");
      font-weight: 400; /* Regular */
      font-style: normal;
  }
  
  @font-face {
      font-family: "Volkhov";
      src: url("Volkhov/Volkhov-Regular.ttf") format("truetype");
      font-weight: 400; /* Regular */
      font-style: normal;
  }
  
  @font-face {
      font-family: "Poppins";
      src: url("Poppins/Poppins-Regular.ttf") format("truetype");
      font-weight: 400; /* Regular */
      font-style: normal;
  }
  
  @font-face {
      font-family: "Poppins";
      src: url("Poppins/Poppins-Medium.ttf") format("truetype");
      font-weight: 500; /* Medium */
      font-style: normal;
  }
    header {
      max-width: 1280px;
      margin: 0px auto;
      padding: 10px;
      background: white;
      border-radius: 8px;

      display: flex; /* Sử dụng flexbox để tạo layout */
      height: 100%;
  }
  
  .logo {
      font-family: Volkhov, serif;
      font-size: 52px;
      color: #484848;
      margin-left: auto;
  }
  
  nav {
      flex-grow: 1; /* Để nav chiếm không gian còn lại */
      text-align: center; /* Căn giữa nav */
      margin-left: 150px;
      justify-content: center;
      padding: 20px;
      display: flex;
  }
  .right-section {
    display: flex; /* Sử dụng flexbox cho div chứa search và tool */
    align-items: center; /* Căn giữa theo chiều dọc */
}
  
  .nav-btn {
      color: #484848;
      font-family: Poppins, sans-serif;
      font-size: 16px;
      text-decoration: none;
      padding: 0 30px;
      position: relative;
  }
  
.nav-btn::after {
  content: ""; /* Tạo nội dung rỗng cho pseudo-element */
  display: block; /* Đặt thành block để có thể điều chỉnh chiều rộng */
  width: 0; /* Chiều rộng ban đầu là 0 */
  height: 2px; /* Độ dày của viền */
  background: black; /* Màu viền */
  transition: width 0.3s; /* Hiệu ứng chuyển tiếp khi hover */
  margin: auto; /* Căn giữa viền */
}

.nav-btn:hover::after {
  width: 100%; /* Đặt chiều rộng thành 100% khi hover */
}
  
  .search {
      display: flex;
      align-items: center;
      border: 1px solid #8A8A8A;
      margin-right: 20px; /* Khoảng cách giữa search và tool */
      background-color: #fff;
  }
  
  .search-icon {
      width: 18px;
      height: 18px;
      margin-left: 8px;
  } 
  .tool {
      display: flex;
      gap: 25px;
  }
  
  .tool-btn {
      display: flex;
      align-items: center;
  }
  
  .tool-icon {
      width: 24px;
      height: 24px;
  }
  
  .newsletter {
      display: flex;
      justify-content: space-between;
      padding: 40px;
  }
  
  .image-1, .image-2 {
      width: 33.3%;
  }
  
  .subscribe {
      width: 33.3%;
      text-align: center;
      padding-top: 80px;
  }
  
  .subscribe h1 {
      font-family: Vollkorn, serif;
      color: #484848;
      font-size: 40px;
      margin-bottom: 0;
  }
  .subscribe p {
    font-family:FzPoppins,serif ;
    color: #8A8A8A;
    font-size: 15px;
}
.email-bar {
    color: #8A8A8A;
    font-family: Poppins, sans-serif;
    font-size: 16px;
    padding: 10px;
    border: 1px solid #8A8A8A;
    width: 100%;
    display: block;
    margin-bottom: 20px;
    outline: none;
    height: 40px;
}

.subscribe-btn {
    background-color: #000;
    color: #FFF;
    padding: 10px 30px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-family: Poppins, sans-serif;
    font-size: 12px;
    height: 40px ;
    box-shadow: 0px 20px 35px 0px rgba(0, 0, 0, 0.15);
}

footer {
  max-width: 1280px;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    background-color: #f4f4f9;
    background: white;
    margin: 0px auto;
}

.logo-ft {
    font-family: Volkhov, serif;
    font-size: 32px;
    color: #484848;
}

.nav-ft {
    display: flex;
    gap: 30px;
    flex: 1;
    justify-content: flex-end;
}

.copyright {
    font-family: Poppins, sans-serif;
    font-size: 12px;
    color: #484848;
    margin-top: 20px;
    text-align: center;
    clear: both;
    width: 100%;
}
    .container {
      max-width: 1280px;
      margin: 0px auto;
      background: white;
      display: flex; /* Sử dụng flexbox để tạo layout */
      height: auto;
    }
    .filters {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .filters select {
      padding: 5px;
      font-size: 1em;
    }
    .product {
      display: flex;
      border-bottom: 1px solid #ddd;
      padding: 15px 0;
    }
    .product:last-child {
      border-bottom: none;
    }
    .product img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      margin-right: 20px;
      border-radius: 5px;
    }
    .product-details {
      flex: 1;
    }
    .product h2 {
      margin: 0;
      font-size: 1.5em;
    }
    .product p {
      margin: 5px 0;
    }
    .price {
      color: #28a745;
      font-weight: bold;
    }
    .stock {
      color: #dc3545;
    }
    .sold {
      color: #007bff;
    }
    .color-selector {
      display: flex;
      gap: 5px;
      margin: 10px 0;
    }
    .color-button {
      width: 20px;
      height: 20px;
      border: 1px solid #ddd;
      border-radius: 50%;
      cursor: pointer;
    }
    .color-button:hover {
      opacity: 0.8;
    }
    h1{
      text-align: center;
    }
    .sold-out {
      position: absolute; /* Để đặt vị trí tuyệt đối */
      top: 50%; /* Đặt ở giữa theo chiều dọc */
      left: 40%; /* Đặt ở giữa theo chiều ngang */
      transform: translate(-50%, -50%); /* Căn giữa chính xác */
      background-color: rgba(0, 0, 0, 0.7); /* Nền màu với độ trong suốt */
      color: white; /* Màu chữ */
      padding: 10px; /* Padding cho khối sold out */
      border-radius: 50%; /* Bo góc để tạo hình tròn */
      font-weight: bold; /* Đậm chữ */
      z-index: 10; /* Đảm bảo nó nằm trên các phần tử khác */
      font-size: 1em; /* Kích thước chữ */
      width: 40px; /* Đặt chiều rộng cho hình tròn */
      height: 40px; /* Đặt chiều cao cho hình tròn */
      display: flex; /* Sử dụng flexbox để căn giữa chữ */
      align-items: center; /* Căn giữa theo chiều dọc */
      justify-content: center; /* Căn giữa theo chiều ngang */
    }
    #product-list {
      display: flex; /* Sử dụng Flexbox */
      flex-wrap: wrap; /* Cho phép các sản phẩm xuống dòng khi không đủ chỗ */
      gap: 20px; /* Khoảng cách giữa các sản phẩm */
      justify-content: flex-start; /* Đảm bảo căn trái khi có ít sản phẩm */
      padding-right: 5px;
      width: 100%;
      max-width: 100%;
    }
    
    .product {
      flex: 0 1 45%; 
      max-width: 45%; 
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Thêm bóng cho sản phẩm */
      border-radius: 8px; /* Bo góc cho sản phẩm */
      padding: 10px; /* Thêm padding cho sản phẩm */
      background-color: white; /* Màu nền cho sản phẩm */
      position: relative; /* Để sử dụng với sold-out */
    }
    .product-image {
      position: relative; /* Để sử dụng cho vị trí tuyệt đối của sold-out */
      text-align: center; /* Căn giữa nội dung trong phần tử */
    }

  
.main-container{
  width: 100%;
  flex-grow: 1; /* Chiếm không gian còn lại */
}

.sidebar {
  max-width: 250px; /* Đặt chiều rộng cho sidebar */
  padding: 15px; /* Padding cho sidebar */
  padding-left: 0;
}

.product-list {
  flex-grow: 1; /* Chiếm không gian còn lại */
  padding: 15px; /* Padding cho danh sách sản phẩm */
  overflow-y: auto; /* Thêm thanh cuộn nếu nội dung vượt quá chiều cao */
}
#search-bar {
  width: 400px; /* Đặt chiều rộng của thanh tìm kiếm là 100% */
  padding: 10px; /* Thêm padding cho thanh tìm kiếm */
  margin-bottom: 20px; /* Khoảng cách dưới thanh tìm kiếm */
  margin-left: 13.5px;
  margin-top: 25px;
  box-sizing: border-box; /* Đảm bảo padding không làm tăng chiều rộng */
}

.filter-category, .filter-size, .filter-color, .filter-sort {
  margin-bottom: 15px; /* Khoảng cách giữa các bộ lọc */
  width: 175px;
}

h3, h4 {
  margin: 0 0 10px 0; /* Giảm khoảng cách cho tiêu đề */
}
h2{
  padding: 0 0 20px 0;
}
select {
  width: 100%;
  padding: 5px; /* Padding cho dropdown */
  font-size: 1em; /* Kích thước chữ */
  border: none; /* Đường viền cho dropdown */
  border-bottom: 1px solid #ccc;
  background-color: transparent; /* Màu nền cho dropdown */
  outline: none;
}
select:focus {
  outline: none; /* Ẩn outline mặc định */
}
input[type="text"] {
  padding: 10px; /* Padding cho thanh tìm kiếm */
  font-size: 1em; /* Kích thước chữ */
  border: 1px solid #ccc; /* Đường viền cho thanh tìm kiếm */
  border-radius: 4px; /* Bo góc cho thanh tìm kiếm */
  width: 100%; /* Chiều rộng 100% */
  box-sizing: border-box; /* Đảm bảo padding không làm tăng chiều rộng */
}
input[type="text"]:focus {
  outline: none; /* Ẩn outline mặc định */
}
a {
  text-decoration: none; /* Xóa gạch chân */
  color: inherit; /* Dùng màu chữ của phần tử cha */
}

  </style>
</head>
<body>
  <header>
    <div class="logo">SHOO</div>
    <nav>
        <a href="#" class="nav-btn">Home</a>
        <a href="#" class="nav-btn">Shop</a>
        <a href="#" class="nav-btn">Products</a>
    </nav>
    <div class="right-section"> <!-- Div chứa search và tool -->
        <div class="search">
          <img src="New folder/search.svg" alt="search icon" class="search-icon">
          <input type="text" placeholder="Tìm kiếm" class="search-bar1" style="outline: none; border: none; width:120px; padding: 7px; font-size: 13px">
        </div>
        <div class="tool">
            <a href="#" class="tool-btn">
                <img src="New folder/user.svg" alt="user icon" class="tool-icon">
            </a>
            <a href="#" class="tool-btn">
                <img src="New folder/star.svg" alt="favorites icon" class="tool-icon">
            </a>
            <a href="#" class="tool-btn">
                <img src="New folder/cart.svg" alt="cart icon" class="tool-icon">
            </a>
        </div>
    </div>
</header>
<h1 style="margin: 30px 0 30px 0;">Thời Trang</h1>
  <div class="container">
    <div class="sidebar">
      <h2>Lọc</h2>
      <div class="filter-category">
        <h4>Danh mục</h4>
        <select id="filter-category">
          <option value="">All Categories</option>
        </select>
      </div>
      <div class="filter-size">
        <h4>Kích cỡ</h4>
        <select id="filter-size">
          <option value="">All Sizes</option>
        </select>
      </div>
      <div class="filter-color">
        <h4>Màu sắc</h4>
        <select id="filter-color">
          <option value="">All Colors</option>
        </select>
      </div>
      <div class="filter-sort">
        <h4>Sắp xếp</h4>
        <select id="filter-sort">
          <option value="price">Theo giá</option>
          <option value="date_added">Theo ngày đăng</option>
          <option value="sold">Theo số lượng bán</option>
        </select>
      </div>
    </div>
    <div class="main-content">
      <input type="text" id="search-bar" placeholder=" Tìm kiếm " />
      <div class="product-list" id="product-list">
        <!-- Sản phẩm sẽ được render ở đây -->
      </div>
    </div>
  </div>

  <div class="newsletter">
    <img src="New folder/7xpndigk 2.png" alt="newsletter image 1" class="image-1">
    <div class="subscribe">
      <h1>Đăng ký nhận bản tin</h1>
      <p>Để nhận các thông tin mới từ SHOO cùng như các chương trình khuyến mãi hấp dẫn</p>
      <input type="email" placeholder="shoo@email.com" class="email-bar">
      <button type="submit" class="subscribe-btn">Đăng ký ngay</button>
  </div>
    <img src="New folder/2qt47two 2.png" alt="newsletter image 2" class="image-2">
</div>

<footer>
    <hr>
    <div class="logo-ft">SHOO</div>
    <nav class="nav-ft">
        <a href="#" class="nav-btn">Home</a>
        <a href="#" class="nav-btn">Shop</a>
        <a href="#" class="nav-btn">Products</a>
    </nav>
    <div class="copyright">Copyright © 2024 SHOO. All Rights Reserved.</div>
</footer>
  <script>
    // Fetch JSON data
    fetch('products.json?' + new Date().getTime())  // Add timestamp to avoid cache
      .then(response => response.json())
      .then(data => {
        const products = data.products; // Access the 'products' array

        const productList = document.getElementById('product-list');
        const filterCategory = document.getElementById('filter-category');
        const filterSize = document.getElementById('filter-size');
        const filterColor = document.getElementById('filter-color');
        const filterSort = document.getElementById('filter-sort');
        const searchBar = document.getElementById('search-bar');

        // Populate filter options
        const categories = [...new Set(products.map(product => product.category))];
        const sizes = [...new Set(products.flatMap(product => product.sizes))];
        const colors = [...new Set(products.flatMap(product => Object.keys(product.colors)))];

        categories.forEach(category => {
          const option = document.createElement('option');
          option.value = category;
          option.textContent = category;
          filterCategory.appendChild(option);
        });

        sizes.forEach(size => {
          const option = document.createElement('option');
          option.value = size;
          option.textContent = size;
          filterSize.appendChild(option);
        });

        colors.forEach(color => {
          const option = document.createElement('option');
          option.value = color;
          option.textContent = color;
          filterColor.appendChild(option);
        });

        // Sort function for sorting products
        const sortProducts = (filteredProducts) => {
          const sortBy = filterSort.value;

          return filteredProducts.sort((a, b) => {
            if (sortBy === 'price') {
              return a.price - b.price;
            } else if (sortBy === 'date_added') {
              return new Date(b.date_added) - new Date(a.date_added);
            } else if (sortBy === 'sold') {
              return b.sold - a.sold;
            }
            return 0;
          });
        };

        // Render products
        const renderProducts = (filteredProducts) => {
          productList.innerHTML = '';
          sortProducts(filteredProducts).forEach(product => {
            const productDiv = document.createElement('div');
            productDiv.className = 'product';

            productDiv.innerHTML = `
      <div class="product-image">
        <a href="product_page.html?id=${product.id}"><img src="${product.main_image}" alt="${product.name}" id="product-image-${product.id}"></a>
        ${product.stock === 0 ? '<div class="sold-out">Hết hàng</div>' : ''}
      </div>
      <div class="product-details" style="text-align: left;">
        <h3><a href="product_page.html?id=${product.id}">${product.name}</a></h3>
        <p><strong>Đã bán:</strong> <span class="sold">${product.sold}</span></p>
        <p class="price">$${product.price.toFixed(2)}</p>
        <div class="color-selector" id="color-selector-${product.id}"></div>
      </div>
    `;
        
        
            // Thêm mã cho các lựa chọn màu sắc (nếu có)
            const colorSelector = productDiv.querySelector(`#color-selector-${product.id}`);
            Object.keys(product.colors).forEach(color => {
              const colorButton = document.createElement('div');
              colorButton.className = 'color-button';
              colorButton.style.backgroundColor = color;
              colorButton.addEventListener('click', () => {
                const productImage = document.getElementById(`product-image-${product.id}`);
                productImage.src = product.colors[color] || product.main_image; // Fallback to main image
              });
              colorSelector.appendChild(colorButton);
            });
        
            productList.appendChild(productDiv);
          });
        };

        renderProducts(products);

        // Filter products
        const applyFilters = () => {
          const category = filterCategory.value;
          const size = filterSize.value;
          const color = filterColor.value;
          const searchTerm = searchBar.value.toLowerCase(); // Lấy giá trị từ thanh tìm kiếm
        
          const filteredProducts = products.filter(product => {
            const matchesCategory = !category || product.category === category;
            const matchesSize = !size || product.sizes.includes(parseInt(size));
            const matchesColor = !color || Object.keys(product.colors).includes(color);
            const matchesSearch = product.name.toLowerCase().includes(searchTerm); // Kiểm tra tìm kiếm
        
            return matchesCategory && matchesSize && matchesColor && matchesSearch; // Cập nhật điều kiện
          });
        
          renderProducts(filteredProducts);
        };
        searchBar.addEventListener('input', applyFilters);

        filterCategory.addEventListener('change', applyFilters);
        filterSize.addEventListener('change', applyFilters);
        filterColor.addEventListener('change', applyFilters);
        filterSort.addEventListener('change', applyFilters);
      })
      .catch(error => console.error('Error fetching products:', error));
  </script>
</body>
</html>
